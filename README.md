# BlogExtension Plugin

- [Возможности и описание](#features)
- [Компоненты](#components)

## Возможности и описание <a name="features"/>
Плагин является дополнением к плагину RainLab.Blog. Основные дополнения:
- [возможность пользователю бэкэнда быть автором поста, добавляет профиль автора](#post-author)
- [навигация по постам](#post-navigation)
- [цветовой код HEX для каждой категории](#hex-code)
- время чтения поста
- количество просмотров поста

### Возможность пользователю backend быть автором поста, добавляет профиль автора <a name="post-author"/>
 
Автор - это новая роль в BackendUser. 
Ее нужно создать в настройках OctoberCMS: Администраторы -> Управление ролями -> Новая роль с такими параметрами:
- **name: Author**
- **code: author**
- **permissions: blog/manage the blog posts(allow)**

После этого при изменении или добавлении нового пользователя для backend будет доступен выбор этой роли. 

Чтобы назначить автора блога, вам нужно перейти на вкладку Blog(Блог) в OctoberCMS и после выбора поста для редактирования, нажать вкладку  Manage( Управление) -> Published by(Опубликовано) и выбрать имя нужного автора.

### Навигация по записям в блоге <a name="post-navigation">
Это расширение получает весь текст записи, проверяет его и находит заголовки h1, h2. Если они были найдены, генерирует массив JSON с этими заголовками и их URL.
Для отображения навигации необходим файл, в котором содержимое поста отображается после этого кода:

```
<ul>
    {% for post in post.navigation %}
        {% if post.level == 2 %}
            <li>
                <a href="#{{ post.id }}" data-target="#{{ post.id }}">
                    {{ post.innerHtml }}
                </a>
            </li>
            {% else %}
                <li>
                    <a href="#{{ post.id }}" data-target="#{{ post.id }}" >
                        {{ post.innerHtml }}
                    </a>
                </li>
        {% endif %}
    {% endfor %}
</ul>
```
где:
- **post.level** - тип заголовков (h1 = 1, h2 = 2).
- **post.innerHtml** - текст заголовков.
- **post.id** - URL-адрес в тексте для этого заголовка.

### Навигация по записям в блоге <a name="hex-code">

Это свойство расширяет модель категории и может быть добавлено как свойство по умолчанию.
```
{{ category.color }}
// Вывод будет таким: #000000
```
Для выбора цвета для категории, нужно перейти на страницу Blog(Блог) -> Categories(Категории) и выбрать для редактирования категорию.
